{% extends "base.html" %}
{% block title %}Search Page{% endblock %}

{% block search %}active{% endblock %}

{% block pageName %}Search{% endblock %}

{% block content %}
<form action = "#" class="form-inline my-2 my-lg-0" method = "POST">
    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" name ="searching">
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit" onclick = "getProfile(895ebdcb42a240fd906aebb862a08646)">Search</button>
  </form>
<div style = "display: grid;grid-template-columns: repeat(3, 1fr); border: black">
    {% for item in results %}
    <div style = "padding: 10px">
      <form action = "#" method = "POST">
      <image src = {{item.images[1]["url"]}}></image>
      <p>{{item.name}}</p>
      <input type = "hidden" name = "getAlbumID" value = "{{item.id}}">
      <input type = "submit" value = "Подробнее" style = "background-color: ">
      </form>
    </div>
    {% endfor %}
</div>

<script>
    async function getProfile(accessToken) {
        let accessToken = localStorage.getItem('access_token');
      
        const response = await fetch('https://api.spotify.com/v1/me', {
          headers: {
            Authorization: 'Bearer ' + accessToken
          }
        });
      
        const data = await response.json();
      }
</script>
{% endblock %}